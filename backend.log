INFO:     Will watch for changes in these directories: ['/Users/johan/Development/archetype/backend']
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [7020] using WatchFiles
Process SpawnProcess-1:
Traceback (most recent call last):
  File "/opt/homebrew/Cellar/python@3.13/3.13.6/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 313, in _bootstrap
    self.run()
    ~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.6/Frameworks/Python.framework/Versions/3.13/lib/python3.13/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    ~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
  File "/opt/homebrew/Cellar/python@3.13/3.13.6/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.6/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
    ~~~~~~~~~~~^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
  File "/opt/homebrew/Cellar/python@3.13/3.13.6/Frameworks/Python.framework/Versions/3.13/lib/python3.13/importlib/__init__.py", line 88, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/Users/johan/Development/archetype/backend/main.py", line 107, in <module>
    @app.get("/api/projects", response_model=List[ProjectResponse])
     ^^^
NameError: name 'app' is not defined
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Started server process [7244]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:61101 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61142 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:61155 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61210 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61222 - "OPTIONS /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:61223 - "OPTIONS /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:61225 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61223 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:61227 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61222 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:61222 - "OPTIONS /api/projects/1/characters HTTP/1.1" 200 OK
INFO:     127.0.0.1:61223 - "OPTIONS /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:61222 - "GET /api/projects/1/characters HTTP/1.1" 200 OK
INFO:     127.0.0.1:61223 - "GET /api/characters/1/images HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/main.py", line 631, in list_dataset_images
    limb_ratios=json.loads(metrics.limb_ratios_json) if metrics and metrics.limb_ratios_json else None
                ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
INFO:     127.0.0.1:61249 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:61251 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61249 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:61255 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61253 - "GET /api/projects/1/characters HTTP/1.1" 200 OK
INFO:     127.0.0.1:61295 - "GET /api/characters/1/images HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/main.py", line 631, in list_dataset_images
    limb_ratios=json.loads(metrics.limb_ratios_json) if metrics and metrics.limb_ratios_json else None
                ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
INFO:     127.0.0.1:61312 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61359 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61395 - "GET /api/characters/1/images HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 355, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 243, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/main.py", line 631, in list_dataset_images
    limb_ratios=json.loads(metrics.limb_ratios_json) if metrics and metrics.limb_ratios_json else None
                ^^^^
NameError: name 'json' is not defined. Did you forget to import 'json'?
INFO:     127.0.0.1:61417 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61501 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [7244]
INFO:     Started server process [7742]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:61607 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61651 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61670 - "GET /api/characters/1/images HTTP/1.1" 400 Bad Request
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [7742]
INFO:     Started server process [7969]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:61703 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61717 - "GET /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:61751 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61762 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:61764 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61766 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:61768 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61766 - "GET /api/projects/1/characters HTTP/1.1" 200 OK
INFO:     127.0.0.1:61762 - "GET /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:61779 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_7s2ix97s2ix97s2i.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61780 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251207_235600_03.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61781 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251208_004016_24.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61782 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251208_004016_68.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61783 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251208_063253_13.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61784 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_dinjh8dinjh8dinj.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61783 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_3e3e37c0.png&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61781 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_uiim5muiim5muiim.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61784 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_6d85a270.png&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61779 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_gy4gdwgy4gdwgy4g.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61782 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_49f9c34e.png&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61780 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_4d20af27.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61782 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_a0fbb44e.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61780 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_aecc1436.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61784 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_b6f72643.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61779 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_e1eb1808.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61783 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_d0a01321.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:61783 - "GET /api/image/serve?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251207_235600_03.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:61831 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61881 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [7969]
INFO:     Started server process [8251]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:61954 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'batch_processor.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [8251]
INFO:     Started server process [8273]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:62012 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62047 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62045 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:62049 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62045 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:62058 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62060 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62130 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62168 - "POST /api/process/batch HTTP/1.1" 200 OK
INFO:vision_engine:Vision Engine initialized on mps
INFO:vision_engine:InsightFace model loaded successfully
/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/insightface/utils/face_align.py:23: FutureWarning: `estimate` is deprecated since version 0.26 and will be removed in version 2.2. Please use `SimilarityTransform.from_estimate` class constructor instead.
  tform.estimate(lmk, dst)
INFO:vision_engine:YOLO-Pose model loaded successfully
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/1k3d68.onnx landmark_3d_68 ['None', 3, 192, 192] 0.0 1.0
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/2d106det.onnx landmark_2d_106 ['None', 3, 192, 192] 0.0 1.0
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/det_10g.onnx detection [1, 3, '?', '?'] 127.5 128.0
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/genderage.onnx genderage ['None', 3, 96, 96] 0.0 1.0
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/w600k_r50.onnx recognition ['None', 3, 112, 112] 127.5 127.5
set det-size: (640, 640)
INFO:     127.0.0.1:62195 - "GET /api/health HTTP/1.1" 200 OK
/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/insightface/utils/face_align.py:23: FutureWarning: `estimate` is deprecated since version 0.26 and will be removed in version 2.2. Please use `SimilarityTransform.from_estimate` class constructor instead.
  tform.estimate(lmk, dst)
INFO:vision_engine:Loading SMPLest-X model (this may take a moment)...
INFO:vision_engine:SMPLest-X model loaded successfully
/Users/johan/Development/archetype/backend/smplest_x_lib/utils/transforms.py:234: UserWarning: Using torch.cross without specifying the dim arg is deprecated.
Please either pass the dim explicitly or simply use torch.linalg.cross.
The default value of dim will change to agree with that of linalg.cross in a future release. (Triggered internally at /Users/runner/work/pytorch/pytorch/pytorch/aten/src/ATen/native/Cross.cpp:67.)
  b3 = torch.cross(b1, b2)
/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/torch/nn/functional.py:5294: UserWarning: MPS: The constant padding of more than 3 dimensions is not currently supported natively. It uses View Ops default implementation to run. This may have performance implications. (Triggered internally at /Users/runner/work/pytorch/pytorch/pytorch/aten/src/ATen/native/mps/operations/Pad.mm:468.)
  return torch._C._nn.pad(input, pad, mode, value)
WARNING: SMPLX_to_J14.pkl not found, setting to None
WARNING: MANO_SMPLX_vertex_ids.pkl not found, setting to None
WARNING: SMPL-X__FLAME_vertex_ids.npy not found, setting to None
Total #parameters: 687223152 (0.69B)
INFO:     127.0.0.1:62243 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62305 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62330 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:62332 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62330 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:62336 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62330 - "GET /api/projects/1/characters HTTP/1.1" 200 OK
INFO:     127.0.0.1:62334 - "GET /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:62344 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251208_063253_13.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62345 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_7s2ix97s2ix97s2i.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62348 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251208_004016_24.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62349 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_dinjh8dinjh8dinj.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62352 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251207_235600_03.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62353 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251208_004016_68.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62352 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_49f9c34e.png&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62353 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_3e3e37c0.png&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62344 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_gy4gdwgy4gdwgy4g.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62345 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_uiim5muiim5muiim.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62348 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_4d20af27.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62349 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_6d85a270.png&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62345 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_a0fbb44e.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62349 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_aecc1436.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62348 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_b6f72643.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62344 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_e1eb1808.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62353 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_d0a01321.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:62366 - "OPTIONS /api/process/batch HTTP/1.1" 200 OK
INFO:     127.0.0.1:62366 - "POST /api/process/batch HTTP/1.1" 200 OK
INFO:     127.0.0.1:62369 - "WebSocket /ws/process/1c29c549-e23a-495b-86c7-06628b788620" [accepted]
INFO:     connection open
INFO:     connection closed
INFO:     127.0.0.1:62377 - "GET /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:62394 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62409 - "GET /api/image/serve?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_d0a01321.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:62409 - "GET /api/image/serve?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_a0fbb44e.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:62409 - "GET /api/image/serve?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_aecc1436.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:62439 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62479 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62534 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62576 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62629 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62678 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62729 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62770 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62821 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62881 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:62939 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63010 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63051 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63086 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63155 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63197 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63231 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63274 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63330 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63376 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63430 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'vision_engine.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [8273]
INFO:     Started server process [9760]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:63504 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'batch_processor.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [9760]
INFO:     Started server process [9815]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:63550 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63597 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63654 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63713 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63750 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63818 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63871 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63910 - "OPTIONS /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:63911 - "OPTIONS /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:63913 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63915 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63911 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:63910 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:63910 - "OPTIONS /api/projects/1/characters HTTP/1.1" 200 OK
INFO:     127.0.0.1:63911 - "OPTIONS /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:63910 - "GET /api/projects/1/characters HTTP/1.1" 200 OK
INFO:     127.0.0.1:63911 - "GET /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:63922 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251207_235600_03.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63923 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251208_004016_24.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63924 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251208_004016_68.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63925 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251208_063253_13.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63926 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_7s2ix97s2ix97s2i.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63927 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_dinjh8dinjh8dinj.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63927 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_3e3e37c0.png&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63925 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_uiim5muiim5muiim.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63926 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_4d20af27.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63922 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_49f9c34e.png&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63923 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_gy4gdwgy4gdwgy4g.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63924 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_6d85a270.png&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63925 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_a0fbb44e.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63922 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_b6f72643.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63924 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_aecc1436.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63923 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_e1eb1808.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63927 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_d0a01321.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:63911 - "OPTIONS /api/process/batch HTTP/1.1" 200 OK
INFO:     127.0.0.1:63911 - "POST /api/process/batch HTTP/1.1" 200 OK
INFO:vision_engine:Vision Engine initialized on mps
INFO:vision_engine:InsightFace model loaded successfully
/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/insightface/utils/face_align.py:23: FutureWarning: `estimate` is deprecated since version 0.26 and will be removed in version 2.2. Please use `SimilarityTransform.from_estimate` class constructor instead.
  tform.estimate(lmk, dst)
INFO:vision_engine:YOLO-Pose model loaded successfully
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/1k3d68.onnx landmark_3d_68 ['None', 3, 192, 192] 0.0 1.0
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/2d106det.onnx landmark_2d_106 ['None', 3, 192, 192] 0.0 1.0
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/det_10g.onnx detection [1, 3, '?', '?'] 127.5 128.0
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/genderage.onnx genderage ['None', 3, 96, 96] 0.0 1.0
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/w600k_r50.onnx recognition ['None', 3, 112, 112] 127.5 127.5
set det-size: (640, 640)
INFO:     127.0.0.1:63910 - "POST /api/process/batch HTTP/1.1" 200 OK
/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/insightface/utils/face_align.py:23: FutureWarning: `estimate` is deprecated since version 0.26 and will be removed in version 2.2. Please use `SimilarityTransform.from_estimate` class constructor instead.
  tform.estimate(lmk, dst)
INFO:     127.0.0.1:63925 - "GET /api/image/serve?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251207_235600_03.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:63948 - "WebSocket /ws/process/a45ae94f-171e-4d9e-b39c-b679c25e1ba4" [accepted]
INFO:     127.0.0.1:63942 - "POST /api/process/batch HTTP/1.1" 200 OK
INFO:     connection open
INFO:vision_engine:Loading SMPLest-X model (this may take a moment)...
INFO:vision_engine:SMPLest-X model loaded successfully
/Users/johan/Development/archetype/backend/smplest_x_lib/utils/transforms.py:234: UserWarning: Using torch.cross without specifying the dim arg is deprecated.
Please either pass the dim explicitly or simply use torch.linalg.cross.
The default value of dim will change to agree with that of linalg.cross in a future release. (Triggered internally at /Users/runner/work/pytorch/pytorch/pytorch/aten/src/ATen/native/Cross.cpp:67.)
  b3 = torch.cross(b1, b2)
/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/torch/nn/functional.py:5294: UserWarning: MPS: The constant padding of more than 3 dimensions is not currently supported natively. It uses View Ops default implementation to run. This may have performance implications. (Triggered internally at /Users/runner/work/pytorch/pytorch/pytorch/aten/src/ATen/native/mps/operations/Pad.mm:468.)
  return torch._C._nn.pad(input, pad, mode, value)
INFO:     127.0.0.1:63951 - "WebSocket /ws/process/5d7363c1-f6d0-42a6-b7a0-50ba50670be0" [accepted]
INFO:     connection open
INFO:     127.0.0.1:63965 - "WebSocket /ws/process/9a746d22-e0db-4ce8-ba6a-8a4f58553bfb" [accepted]
INFO:     connection open
WARNING: SMPLX_to_J14.pkl not found, setting to None
WARNING: MANO_SMPLX_vertex_ids.pkl not found, setting to None
WARNING: SMPL-X__FLAME_vertex_ids.npy not found, setting to None
Total #parameters: 687223152 (0.69B)
INFO:     127.0.0.1:63975 - "GET /api/health HTTP/1.1" 200 OK
INFO:     connection closed
INFO:     connection closed
INFO:     127.0.0.1:63985 - "GET /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:63987 - "GET /api/characters/1/images HTTP/1.1" 200 OK
INFO:     connection closed
INFO:     127.0.0.1:63987 - "GET /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:64022 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64066 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64082 - "GET /api/image/serve?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_d0a01321.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:64102 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:64104 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64102 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:64108 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64102 - "GET /api/projects/1/characters HTTP/1.1" 200 OK
INFO:     127.0.0.1:64106 - "GET /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:64129 - "GET /api/image/serve?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_a0fbb44e.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:64156 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64188 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64227 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64259 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64325 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:64327 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64329 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:64332 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64329 - "GET /api/projects/1/characters HTTP/1.1" 200 OK
INFO:     127.0.0.1:64325 - "GET /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:64384 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64417 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64466 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'database.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [9815]
INFO:     Started server process [10638]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'batch_processor.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [10638]
INFO:     Started server process [10650]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [10650]
INFO:     Started server process [10674]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:64524 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [10674]
INFO:     Started server process [10701]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:64580 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64626 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64694 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64745 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64810 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64843 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64905 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64950 - "OPTIONS /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:64951 - "OPTIONS /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:64952 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64954 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:64950 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:64951 - "GET /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:64951 - "OPTIONS /api/projects/1/characters HTTP/1.1" 200 OK
INFO:     127.0.0.1:64950 - "OPTIONS /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:64951 - "GET /api/projects/1/characters HTTP/1.1" 200 OK
INFO:     127.0.0.1:64950 - "GET /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:64964 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251208_004016_24.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64965 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251207_235600_03.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64966 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251208_004016_68.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64967 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251208_063253_13.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64968 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_7s2ix97s2ix97s2i.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64969 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_dinjh8dinjh8dinj.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64969 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_3e3e37c0.png&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64967 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_gy4gdwgy4gdwgy4g.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64968 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FGemini_Generated_Image_uiim5muiim5muiim.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64966 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_49f9c34e.png&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64965 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_6d85a270.png&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64964 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_4d20af27.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64968 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_a0fbb44e.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64966 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_b6f72643.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64965 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_e1eb1808.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64967 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_aecc1436.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64964 - "GET /api/image/thumbnail?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_d0a01321.jpg&size=256 HTTP/1.1" 200 OK
INFO:     127.0.0.1:64950 - "OPTIONS /api/process/batch HTTP/1.1" 200 OK
INFO:     127.0.0.1:64950 - "POST /api/process/batch HTTP/1.1" 200 OK
INFO:vision_engine:Vision Engine initialized on mps
INFO:vision_engine:InsightFace model loaded successfully
/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/insightface/utils/face_align.py:23: FutureWarning: `estimate` is deprecated since version 0.26 and will be removed in version 2.2. Please use `SimilarityTransform.from_estimate` class constructor instead.
  tform.estimate(lmk, dst)
INFO:vision_engine:YOLO-Pose model loaded successfully
INFO:     127.0.0.1:64994 - "WebSocket /ws/process/689a55a5-b983-4e75-88e2-ff5c499ba5e4" [accepted]
INFO:     connection open
/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/insightface/utils/face_align.py:23: FutureWarning: `estimate` is deprecated since version 0.26 and will be removed in version 2.2. Please use `SimilarityTransform.from_estimate` class constructor instead.
  tform.estimate(lmk, dst)
INFO:vision_engine:Loading SMPLest-X model (this may take a moment)...
INFO:vision_engine:SMPLest-X model loaded successfully
/Users/johan/Development/archetype/backend/smplest_x_lib/utils/transforms.py:234: UserWarning: Using torch.cross without specifying the dim arg is deprecated.
Please either pass the dim explicitly or simply use torch.linalg.cross.
The default value of dim will change to agree with that of linalg.cross in a future release. (Triggered internally at /Users/runner/work/pytorch/pytorch/pytorch/aten/src/ATen/native/Cross.cpp:67.)
  b3 = torch.cross(b1, b2)
/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/torch/nn/functional.py:5294: UserWarning: MPS: The constant padding of more than 3 dimensions is not currently supported natively. It uses View Ops default implementation to run. This may have performance implications. (Triggered internally at /Users/runner/work/pytorch/pytorch/pytorch/aten/src/ATen/native/mps/operations/Pad.mm:468.)
  return torch._C._nn.pad(input, pad, mode, value)
INFO:     connection closed
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/1k3d68.onnx landmark_3d_68 ['None', 3, 192, 192] 0.0 1.0
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/2d106det.onnx landmark_2d_106 ['None', 3, 192, 192] 0.0 1.0
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/det_10g.onnx detection [1, 3, '?', '?'] 127.5 128.0
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/genderage.onnx genderage ['None', 3, 96, 96] 0.0 1.0
Applied providers: ['CoreMLExecutionProvider', 'CPUExecutionProvider'], with options: {'CPUExecutionProvider': {}, 'CoreMLExecutionProvider': {}}
find model: /Users/johan/Development/archetype/backend/models/insightface/models/buffalo_l/w600k_r50.onnx recognition ['None', 3, 112, 112] 127.5 127.5
set det-size: (640, 640)
WARNING: SMPLX_to_J14.pkl not found, setting to None
WARNING: MANO_SMPLX_vertex_ids.pkl not found, setting to None
WARNING: SMPL-X__FLAME_vertex_ids.npy not found, setting to None
Total #parameters: 687223152 (0.69B)
INFO:     127.0.0.1:65016 - "GET /api/characters/1/images HTTP/1.1" 200 OK
INFO:     127.0.0.1:65019 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:65059 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:65094 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:65136 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:65149 - "GET /api/image/serve?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2FHanna_a0fbb44e.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:65173 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:65213 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:65228 - "GET /api/image/serve?path=%2FVolumes%2FWD_BLACK%2Ftemp%2Ftmp%2Fcurator%2Fhanna%2Fgenerated%2F20251207_235600_03.jpg HTTP/1.1" 200 OK
INFO:     127.0.0.1:65253 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:65295 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:65337 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:65384 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:65421 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:65459 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:65501 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49162 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49199 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49246 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49299 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49341 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49386 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49428 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49460 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49492 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49532 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49568 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49612 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49650 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49687 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49735 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49788 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49843 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49886 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49935 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:49986 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50056 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'vision_engine.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [10701]
INFO:     Started server process [12975]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'vision_engine.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [12975]
INFO:     Started server process [13027]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:50118 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'vision_engine.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13027]
INFO:     Started server process [13061]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'database.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13061]
INFO:     Started server process [13101]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'database.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13101]
INFO:     Started server process [13116]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:50240 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'batch_processor.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13116]
INFO:     Started server process [13374]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:50277 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50302 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'batch_processor.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13374]
INFO:     Started server process [13460]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'batch_processor.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13460]
INFO:     Started server process [13483]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:50349 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'batch_processor.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13483]
INFO:     Started server process [13517]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:50386 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'vision_engine.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13517]
INFO:     Started server process [13584]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:50424 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'vision_engine.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13584]
INFO:     Started server process [13624]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13624]
INFO:     Started server process [13651]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:50486 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50505 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50545 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50579 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50612 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50644 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50654 - "OPTIONS /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:50655 - "OPTIONS /api/projects HTTP/1.1" 200 OK
INFO:     127.0.0.1:50657 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50659 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50655 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x11190f0e0>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50654 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x1119bc690>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50661 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x1119bfd90>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50672 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50670 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x111e4ed70>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50674 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50676 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x111e4f230>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50678 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x111fca9f0>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50685 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50683 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x111973460>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50687 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50689 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x1119fa470>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50691 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x111eb1750>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50696 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50698 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x111eb1350>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50700 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50702 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x111fc1c70>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50704 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x1119c23f0>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50711 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50709 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x111ec65f0>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50714 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50715 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x111ec4590>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50717 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x11198f380>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50757 - "GET /api/health HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'main.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13651]
INFO:     Started server process [13939]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:50795 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50820 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50837 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50839 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50835 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x10707f0e0>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50841 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x10712d090>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50843 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x10712c690>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50852 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50850 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x10820e9e0>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50854 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50856 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x10820f100>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50858 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x1082cbbf0>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50865 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50863 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x10716ae00>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50867 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50869 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x107169e10>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50871 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x1082ad350>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50878 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50876 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x1082ad150>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50880 - "GET /api/health HTTP/1.1" 200 OK
INFO:     127.0.0.1:50882 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x1085c28a0>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     127.0.0.1:50884 - "GET /api/projects HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/httptools_impl.py", line 416, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1135, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/applications.py", line 107, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 186, in __call__
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/middleware/asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 115, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 101, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 377, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
    )
    ^
  File "/Users/johan/Development/archetype/backend/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 215, in serialize_response
    raise ResponseValidationError(
    ...<3 lines>...
    )
fastapi.exceptions.ResponseValidationError: 1 validation error:
  {'type': 'get_attribute_error', 'loc': ('response', 0, 'characters', 0, 'reference_count'), 'msg': 'Error extracting attribute: OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)', 'input': <database.Character object at 0x108287200>, 'ctx': {'error': 'OperationalError: (sqlite3.OperationalError) no such column: reference_images.body_metrics_json\n[SQL: SELECT reference_images.id AS reference_images_id, reference_images.character_id AS reference_images_character_id, reference_images.path AS reference_images_path, reference_images.view_type AS reference_images_view_type, reference_images.embedding_blob AS reference_images_embedding_blob, reference_images.body_metrics_json AS reference_images_body_metrics_json, reference_images.pose_json AS reference_images_pose_json \nFROM reference_images \nWHERE ? = reference_images.character_id]\n[parameters: (1,)]\n(Background on this error at: https://sqlalche.me/e/20/e3q8)'}}

  File "/Users/johan/Development/archetype/backend/main.py", line 380, in list_projects
    GET /api/projects
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [13939]
INFO:     Stopping reloader process [7020]
